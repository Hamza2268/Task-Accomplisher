{% extends 'base.html' %}
{% block content %}
<style>
    body {
        background-color: #EEE;
    }
</style>
<div class="col-md-10 mx-auto col-lg-5">
    <div class="px-4 pt-4 pb-2 p-md-5 pb-md-4 border rounded-3 bg-body-tertiary shadow-sm"
        style="max-height: 85vh; overflow-y: auto;">
        {% if form.Email %}
        <form method="post" novalidate>
            {{ form.csrf_token }}
            {{ form.hidden_tag() }}
            <div class="form-floating mb-3">
                {{ form.Email(class="form-control", id="floatingEmail", placeholder="Email address") }}
                <label for="floatingEmail">Email address</label>
                {% for error in form.Email.errors %}
                <div class="text-danger">{{ error }}</div>
                {% endfor %}
            </div>

            {% with messages = get_flashed_messages() %}
            {% if messages %}
            {% for message in messages %}
            <p style="color: green;">{{ message }}</p>
            {% endfor %}
            {% endif %}
            {% endwith %}

            <div class="d-grid">
                {{ form.Submit(class="btn btn-primary btn-lg") }}
            </div>
        </form>
        <p class="mt-2">Go back <a href="{{ url_for('homepage') }}">home</a>.</p>
        {% elif form.newPassword %}
        <form method="post" novalidate>
            {{ form.csrf_token }}
            {{ form.hidden_tag() }}
            <div class="form-floating mb-3">
                {{ form.newPassword(class="form-control fa-eye", id="floatingPassword", placeholder="New Password") }}
                <label for="floatingPassword">New Password</label>
                    <div class="fa fa-eye" id="toggle"
                        style="position: absolute; right: 10px; top: 20px; cursor: pointer;scale:1.2;">
                            ðŸ‘€
                    </div>
                {% for error in form.newPassword.errors %}
                <div class="text-danger">{{ error }}</div>
                {% endfor %}
            </div>
            <div class="form-floating mb-3">
                {{ form.confirmNewPassword(class="form-control", id="floatingEmail", placeholder="Confirm New Password") }}
                <label for="floatingEmail">Confirm New Password</label>
                {% for error in form.confirmNewPassword.errors %}
                <div class="text-danger">{{ error }}</div>
                {% endfor %}
            </div>

            {% with messages = get_flashed_messages() %}
            {% if messages %}
            {% for message in messages %}
            <p style="color: green;">{{ message }}</p>
            {% endfor %}
            {% endif %}
            {% endwith %}

            <div class="d-grid">
                {{ form.Submit(class="btn btn-primary btn-lg") }}
            </div>
        </form>
        {% endif %}
    </div>
</div>

<script>
    document.querySelector("#toggle").addEventListener("click", function () {
    console.log('yu[p')
        let input = document.getElementById("floatingPassword");
        if (input.type === "password") {
            input.type = "text";
            this.classList.remove("fa-eye");
            this.classList.add("fa-eye-slash");
        } else {
            input.type = "password";
            this.classList.remove("fa-eye-slash");
            this.classList.add("fa-eye");
        }
    });
</script>

{% endblock content %}